<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="Networkx绘图" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="数据处理" /><meta property="og:description" content="数据处理" /><link rel="canonical" href="https://liudezhiya.github.io//posts/networkx%E7%BB%98%E5%9B%BE/" /><meta property="og:url" content="https://liudezhiya.github.io//posts/networkx%E7%BB%98%E5%9B%BE/" /><meta property="og:site_name" content="番茄智" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-16T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Networkx绘图" /><meta name="twitter:site" content="@liudezhi" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-07-16T08:17:43+00:00","datePublished":"2022-07-16T00:00:00+00:00","description":"数据处理","headline":"Networkx绘图","mainEntityOfPage":{"@type":"WebPage","@id":"https://liudezhiya.github.io//posts/networkx%E7%BB%98%E5%9B%BE/"},"url":"https://liudezhiya.github.io//posts/networkx%E7%BB%98%E5%9B%BE/"}</script><title>Networkx绘图 | 番茄智</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="番茄智"><meta name="application-name" content="番茄智"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/config/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">番茄智</a></div><div class="site-subtitle font-italic">这里是番茄智的博客～</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/liudezhiya" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/liudezhi" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['2451456574','qq.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>Networkx绘图</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Networkx绘图</h1><div class="post-meta text-muted"> <span> 发表于 <em class="" data-ts="1657929600" data-df="YYYY/MM/DD" data-toggle="tooltip" data-placement="bottom"> 2022/07/16 </em> </span> <span> 更新于 <em class="" data-ts="1657959463" data-df="YYYY/MM/DD" data-toggle="tooltip" data-placement="bottom"> 2022/07/16 </em> </span><div class="d-flex justify-content-between"> <span> 作者 <em> <a href="https://twitter.com/username">liudezhiya</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2180 字"> <em>12 分钟</em>阅读</span></div></div></div><div class="post-content"><h1 id="数据处理">数据处理</h1><h3 id="1提取文件中只含有项目编号的一列数据"><span class="mr-2">1.提取文件中只含有项目编号的一列数据</span><a href="#1提取文件中只含有项目编号的一列数据" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><img data-src="D:\blog\blog\assets\blog_res022-07-16-networkx绘图.assets\snipaste_20220716_083525.png" style="zoom: 50%;" data-proofer-ignore></p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="s">'''提取项目编号'''</span>
<span class="c1">#file 文件名字
#row_name 列名
#返回项目编号字典
</span><span class="k">def</span> <span class="nf">fund_number</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span><span class="n">row_name</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
    <span class="n">fund</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">row_name</span><span class="p">].</span><span class="n">to_dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">fund</span><span class="p">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">matchObj</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">search</span><span class="p">(</span><span class="s">'[0-9]{4}YFC[0-9]{7}'</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">matchObj</span><span class="p">):</span>
            <span class="n">fund</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">matchObj</span><span class="p">.</span><span class="n">group</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fund</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">fund</span>
</pre></table></code></div></div><h3 id="2先将三个文件需要的数据列提取出来"><span class="mr-2">2.先将三个文件需要的数据列提取出来</span><a href="#2先将三个文件需要的数据列提取出来" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>作者or负责人提取为列表数据</p><p>项目编号提取为字典数据</p><p>这里三个文件都在程序同意目录下，也可以自己指定计算机路径。</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre>	<span class="n">path_paper</span> <span class="o">=</span> <span class="s">'135paper.csv'</span>
    <span class="n">path_thesis</span> <span class="o">=</span> <span class="s">'135thesis.csv'</span>
    <span class="n">path_alldata</span> <span class="o">=</span> <span class="s">'135alldata.csv'</span>
    <span class="n">data_alldata</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path_alldata</span><span class="p">)</span>

    <span class="c1">#提取paper Fund-基金 项目编号
</span>    <span class="n">paper_fund</span><span class="o">=</span><span class="s">'Fund-基金'</span>
    <span class="n">paper_umber</span><span class="o">=</span><span class="n">fund_number</span><span class="p">(</span><span class="n">path_paper</span><span class="p">,</span><span class="n">paper_fund</span><span class="p">)</span>
    <span class="c1"># print(paper_umber)
</span>    <span class="c1"># 提取paper Fund-基金 项目编号
</span>    <span class="n">thesis_fund</span> <span class="o">=</span> <span class="s">'Fund-基金'</span>
    <span class="n">thesis_umber</span> <span class="o">=</span> <span class="n">fund_number</span><span class="p">(</span><span class="n">path_thesis</span><span class="p">,</span> <span class="n">thesis_fund</span><span class="p">)</span>

    <span class="c1"># 提取alldata-基金项目编号
</span>    <span class="n">alldata_fund</span> <span class="o">=</span> <span class="s">'项目编号'</span>
    <span class="n">alldata_number</span> <span class="o">=</span> <span class="n">data_alldata</span><span class="p">[</span><span class="n">alldata_fund</span><span class="p">].</span><span class="n">to_dict</span><span class="p">()</span>

    <span class="c1"># thesis作者(次)
</span>    <span class="n">data_thesis</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path_thesis</span><span class="p">)</span>
    <span class="n">thesis_name</span> <span class="o">=</span> <span class="n">data_thesis</span><span class="p">[</span><span class="s">'Author-作者'</span><span class="p">].</span><span class="n">to_list</span><span class="p">()</span>

    <span class="c1"># alldata项目负责人(主要)
</span>    <span class="n">alldata_name</span> <span class="o">=</span> <span class="n">data_alldata</span><span class="p">[</span><span class="s">'项目负责人'</span><span class="p">].</span><span class="n">to_list</span><span class="p">()</span>
</pre></table></code></div></div><h3 id="3合并alldata和theis"><span class="mr-2">3.合并alldata和theis</span><a href="#3合并alldata和theis" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>合并alldata和theis的负责人为一个列表</p><p>合并alldata和theis的项目编号为一个字典</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre>	<span class="c1"># 合并alldata和theis的负责人和姓名
</span>    <span class="n">node</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">node</span><span class="p">.</span><span class="n">extend</span><span class="p">(</span><span class="n">alldata_name</span><span class="p">)</span>
    <span class="n">node</span><span class="p">.</span><span class="n">extend</span><span class="p">(</span><span class="n">thesis_name</span><span class="p">)</span>

    <span class="c1">#合并alldata和theis编号
</span>    <span class="n">alldata_thesis_number</span><span class="o">=</span><span class="p">{}</span>
    <span class="n">alldata_thesis_number</span><span class="o">=</span><span class="n">alldata_number</span>
    <span class="n">alldata_len</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">alldata_thesis_number</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">thesis_umber</span><span class="p">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">alldata_thesis_number</span><span class="p">[</span><span class="n">alldata_len</span><span class="p">]</span><span class="o">=</span><span class="n">value</span>
        <span class="n">alldata_len</span><span class="o">+=</span><span class="mi">1</span>
</pre></table></code></div></div><h3 id="4将统一项目的项目负责人加入到paper里面的每行项目列表里面"><span class="mr-2">4.将统一项目的项目负责人加入到paper里面的每行项目列表里面</span><a href="#4将统一项目的项目负责人加入到paper里面的每行项目列表里面" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>将paper文件项目列转为列表，对合并alldata和theis的项目编号进行遍历，将符合同意项目的负责人加入到项目列表。返回列表，列表元素为一行还没有拆分姓名数据。</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="s">'''将同一个项目编号的负责人加到paper人员里面'''</span>
<span class="c1">#file 文件
#row 姓名列
#item 要匹配项目编号字典
# 注：姓名列列表 3,4同一文件
#返回列表
</span><span class="k">def</span> <span class="nf">addnamelist</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="n">item</span><span class="p">,</span><span class="n">row_name</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">row</span><span class="p">].</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
        <span class="k">for</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">item</span><span class="p">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">paper_umber</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="o">==</span> <span class="n">n</span> <span class="ow">and</span> <span class="p">(</span><span class="n">n</span><span class="o">!=</span><span class="mi">0</span><span class="p">):</span>
                <span class="n">str_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">+</span> <span class="s">';'</span> <span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">row_name</span><span class="p">[</span><span class="n">m</span><span class="p">])</span><span class="o">+</span> <span class="s">';'</span>
                <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str_name</span>
    <span class="k">return</span> <span class="n">x</span>
</pre></table></code></div></div><h3 id="5将姓名按照分号拆分成列表"><span class="mr-2">5.将姓名按照分号拆分成列表</span><a href="#5将姓名按照分号拆分成列表" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>addnamelist：为列表数据，列表元素为一行还没有拆分姓名数据。</p><p>返回数据：为列表数据，列表元素为一行拆分的姓名列表</p><p>输入输出如下</p><p><img data-src="D:\blog\blog\assets\blog_res022-07-16-networkx绘图.assets.png" alt="" data-proofer-ignore></p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1">#提取姓名列表传入姓名列表返回合并的姓名列表
</span><span class="k">def</span> <span class="nf">nameToRowmerge</span><span class="p">(</span><span class="n">addnamelist</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">addnamelist</span><span class="p">)):</span>
        <span class="n">name_list</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">addnamelist</span><span class="p">[</span><span class="n">i</span><span class="p">]).</span><span class="n">split</span><span class="p">(</span><span class="s">';'</span><span class="p">)</span>
        <span class="k">while</span> <span class="s">''</span> <span class="ow">in</span> <span class="n">name_list</span><span class="p">:</span>
            <span class="n">name_list</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="s">''</span><span class="p">)</span>
        <span class="n">addnamelist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">name_list</span>
    <span class="k">return</span> <span class="n">addnamelist</span>
</pre></table></code></div></div><h3 id="6组合生成边"><span class="mr-2">6.组合生成边</span><a href="#6组合生成边" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>将拆分得到的数据进行遍历组合</p><p>nameToRowmerge[name_line]一行姓名列表</p><p>paper_umber[name_line]一行项目编码</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre> <span class="c1">#姓名列表转为边
</span><span class="k">def</span>  <span class="nf">nemeToEdgeadd</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span><span class="n">number</span><span class="p">):</span>
    <span class="n">edge</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">)):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">)):</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">list</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="nb">list</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">!=</span><span class="s">''</span><span class="p">):</span>
                <span class="n">edge_one</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="n">edge_one</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">edge_one</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
                <span class="c1"># edge_one.append(number)
</span>                <span class="c1"># print(edge_one)
</span>            <span class="n">edge</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge_one</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">edge</span>
 
 
 
 <span class="k">for</span> <span class="n">name_line</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nameToRowmerge</span><span class="p">)):</span>
        <span class="c1"># print(name_list)
</span>        <span class="c1">#姓名列表转为边
</span>        <span class="c1"># nameToRowmerge[name_line]一行姓名列表
</span>        <span class="c1"># paper_umber[name_line]一行项目编码
</span>        <span class="n">edge</span><span class="p">.</span><span class="n">extend</span><span class="p">(</span><span class="n">nemeToEdgeadd</span><span class="p">(</span><span class="n">nameToRowmerge</span><span class="p">[</span><span class="n">name_line</span><span class="p">],</span><span class="n">paper_umber</span><span class="p">[</span><span class="n">name_line</span><span class="p">]))</span>
</pre></table></code></div></div><h3 id="7保存文件"><span class="mr-2">7.保存文件</span><a href="#7保存文件" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>注意本程序文件都保存在程序所在目录</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="s">'''导出为csv文件'''</span>
    <span class="n">test</span><span class="o">=</span><span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">edge</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">'source'</span><span class="p">,</span><span class="s">'target'</span><span class="p">])</span>
    <span class="n">timestr</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%Y%m%d-%H%M%S"</span><span class="p">)</span><span class="c1">#20220715-085113
</span>    <span class="c1">#查看数据
</span>    <span class="k">print</span><span class="p">(</span><span class="n">test</span><span class="p">.</span><span class="n">values</span><span class="p">)</span>
    <span class="c1">#保存到文件
</span>    <span class="n">test</span><span class="p">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s">'d:/'</span><span class="o">+</span> <span class="s">'edge'</span> <span class="o">+</span> <span class="n">timestr</span><span class="o">+</span><span class="s">'.csv'</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s">'gbk'</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></table></code></div></div><p>生成文件格式如下</p><p><img data-src="D:\blog\blog\assets\blog_res022-07-16-networkx绘图.assets.png" style="zoom:50%;" data-proofer-ignore></p><h3 id="8将thesis和allldata姓名打入标签区分不同的类"><span class="mr-2">8.将thesis和allldata姓名打入标签区分不同的类</span><a href="#8将thesis和allldata姓名打入标签区分不同的类" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>将生成名为type.csv的 id—ype类似数据的csv文件</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="s">'''创建thsis和alldata 节点id和type'''</span>
    <span class="c1">#创建文件对象
</span>    <span class="n">f</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">'type.csv'</span><span class="p">,</span><span class="s">'w'</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s">'gbk'</span><span class="p">)</span>
    <span class="c1">#基于文件对象构建csv写入对象
</span>    <span class="n">csv_writer</span><span class="o">=</span><span class="n">csv</span><span class="p">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="c1">#指定文件列名
</span>    <span class="n">csv_writer</span><span class="p">.</span><span class="n">writerow</span><span class="p">([</span><span class="s">'Id'</span><span class="p">,</span><span class="s">'Type'</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">thesis_name</span><span class="p">:</span><span class="c1">#为thesis中作者加入
</span>        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">!=</span> <span class="s">'0'</span> <span class="ow">and</span> <span class="n">name</span> <span class="o">!=</span> <span class="s">''</span><span class="p">:</span>
            <span class="n">csv_writer</span><span class="p">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">name</span><span class="p">,</span><span class="s">'GA_thsis'</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">alldata_name</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">!=</span> <span class="s">'0'</span> <span class="ow">and</span> <span class="n">name</span> <span class="o">!=</span> <span class="s">''</span><span class="p">:</span>
            <span class="n">csv_writer</span><span class="p">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">name</span><span class="p">,</span> <span class="s">'GA_project'</span><span class="p">])</span>
    <span class="n">f</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
</pre></table></code></div></div><p>生成文件格式如下</p><p><img data-src="D:\blog\blog\assets\blog_res022-07-16-networkx绘图.assets.png" style="zoom:50%;" data-proofer-ignore></p><h3 id="完整代码如下"><span class="mr-2">完整代码如下</span><a href="#完整代码如下" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>将三个数据文件放入该程序同一级目录运行就能生成边和节点类型两个csv文件</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1">#提取项目编号
</span><span class="k">def</span> <span class="nf">fund_number</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span><span class="n">row_name</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
    <span class="n">fund</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">row_name</span><span class="p">].</span><span class="n">to_dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">fund</span><span class="p">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">matchObj</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">search</span><span class="p">(</span><span class="s">'[0-9]{4}YFC[0-9]{7}'</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">matchObj</span><span class="p">):</span>
            <span class="n">fund</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">matchObj</span><span class="p">.</span><span class="n">group</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fund</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">fund</span>

<span class="c1">#提取姓名列表传入姓名列表返回合并的姓名列表
</span><span class="k">def</span> <span class="nf">nameToRowmerge</span><span class="p">(</span><span class="n">addnamelist</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">addnamelist</span><span class="p">)):</span>
        <span class="n">name_list</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">addnamelist</span><span class="p">[</span><span class="n">i</span><span class="p">]).</span><span class="n">split</span><span class="p">(</span><span class="s">';'</span><span class="p">)</span>
        <span class="k">while</span> <span class="s">''</span> <span class="ow">in</span> <span class="n">name_list</span><span class="p">:</span>
            <span class="n">name_list</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="s">''</span><span class="p">)</span>
        <span class="n">addnamelist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">name_list</span>
    <span class="k">return</span> <span class="n">addnamelist</span>

<span class="c1">#提取姓名列表增加后
</span><span class="k">def</span> <span class="nf">nameToRowadd</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span><span class="n">row</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">row</span><span class="p">].</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
        <span class="n">name_list</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]).</span><span class="n">split</span><span class="p">(</span><span class="s">';'</span><span class="p">)</span>
        <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">name_list</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">name_list</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="c1">#姓名列表转为边
</span><span class="k">def</span> <span class="nf">nemeToEdge</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
    <span class="n">edge</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">)):</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">list</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="nb">list</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">!=</span><span class="s">''</span><span class="p">):</span>
                <span class="n">edge_one</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="n">edge_one</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">edge_one</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
            <span class="n">edge</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge_one</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">edge</span>
<span class="c1">#姓名列表转为边
</span><span class="k">def</span>  <span class="nf">nemeToEdgeadd</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span><span class="n">number</span><span class="p">):</span>
    <span class="n">edge</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">)):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">)):</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">list</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="nb">list</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">!=</span><span class="s">''</span><span class="p">):</span>
                <span class="n">edge_one</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="n">edge_one</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">edge_one</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
                <span class="c1"># edge_one.append(number)
</span>                <span class="c1"># print(edge_one)
</span>            <span class="n">edge</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge_one</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">edge</span>



<span class="s">'''将同一个项目编号的负责人加到paper人员里面'''</span>
<span class="c1">#返回列表
#file 文件
#row 姓名列
#item 要匹配项目编号字典
#姓名列列表 3,4同一文件
</span><span class="k">def</span> <span class="nf">addnamelist</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="n">item</span><span class="p">,</span><span class="n">row_name</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">row</span><span class="p">].</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
        <span class="k">for</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">item</span><span class="p">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">paper_umber</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="o">==</span> <span class="n">n</span> <span class="ow">and</span> <span class="p">(</span><span class="n">n</span><span class="o">!=</span><span class="mi">0</span><span class="p">):</span>
                <span class="n">str_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">+</span> <span class="s">';'</span> <span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">row_name</span><span class="p">[</span><span class="n">m</span><span class="p">])</span><span class="o">+</span> <span class="s">';'</span>
                <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str_name</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">path_paper</span> <span class="o">=</span> <span class="s">'135paper.csv'</span>
    <span class="n">path_thesis</span> <span class="o">=</span> <span class="s">'135thesis.csv'</span>
    <span class="n">path_alldata</span> <span class="o">=</span> <span class="s">'135alldata.csv'</span>
    <span class="n">data_alldata</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path_alldata</span><span class="p">)</span>

    <span class="c1">#提取paper Fund-基金 项目编号
</span>    <span class="n">paper_fund</span><span class="o">=</span><span class="s">'Fund-基金'</span>
    <span class="n">paper_umber</span><span class="o">=</span><span class="n">fund_number</span><span class="p">(</span><span class="n">path_paper</span><span class="p">,</span><span class="n">paper_fund</span><span class="p">)</span>
    <span class="c1"># print(paper_umber)
</span>    <span class="c1"># 提取paper Fund-基金 项目编号
</span>    <span class="n">thesis_fund</span> <span class="o">=</span> <span class="s">'Fund-基金'</span>
    <span class="n">thesis_umber</span> <span class="o">=</span> <span class="n">fund_number</span><span class="p">(</span><span class="n">path_thesis</span><span class="p">,</span> <span class="n">thesis_fund</span><span class="p">)</span>

    <span class="c1"># 提取alldata-基金项目编号
</span>    <span class="n">alldata_fund</span> <span class="o">=</span> <span class="s">'项目编号'</span>
    <span class="n">alldata_number</span> <span class="o">=</span> <span class="n">data_alldata</span><span class="p">[</span><span class="n">alldata_fund</span><span class="p">].</span><span class="n">to_dict</span><span class="p">()</span>


    <span class="c1"># thesis作者(次)
</span>    <span class="n">data_thesis</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path_thesis</span><span class="p">)</span>
    <span class="n">thesis_name</span> <span class="o">=</span> <span class="n">data_thesis</span><span class="p">[</span><span class="s">'Author-作者'</span><span class="p">].</span><span class="n">to_list</span><span class="p">()</span>

    <span class="c1"># alldata项目负责人(主要)
</span>    <span class="n">alldata_name</span> <span class="o">=</span> <span class="n">data_alldata</span><span class="p">[</span><span class="s">'项目负责人'</span><span class="p">].</span><span class="n">to_list</span><span class="p">()</span>

    <span class="c1"># 合并alldata和theis的负责人和姓名
</span>    <span class="n">node</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">node</span><span class="p">.</span><span class="n">extend</span><span class="p">(</span><span class="n">alldata_name</span><span class="p">)</span>
    <span class="n">node</span><span class="p">.</span><span class="n">extend</span><span class="p">(</span><span class="n">thesis_name</span><span class="p">)</span>

    <span class="c1">#合并alldata和theis编号
</span>    <span class="n">alldata_thesis_number</span><span class="o">=</span><span class="p">{}</span>
    <span class="n">alldata_thesis_number</span><span class="o">=</span><span class="n">alldata_number</span>
    <span class="n">alldata_len</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">alldata_thesis_number</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">thesis_umber</span><span class="p">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">alldata_thesis_number</span><span class="p">[</span><span class="n">alldata_len</span><span class="p">]</span><span class="o">=</span><span class="n">value</span>
        <span class="n">alldata_len</span><span class="o">+=</span><span class="mi">1</span>

    <span class="s">'''遍历alldata和thesis把同一项目负责人加到姓名列表'''</span>
    <span class="n">addnamelist</span> <span class="o">=</span> <span class="n">addnamelist</span><span class="p">(</span><span class="n">path_paper</span><span class="p">,</span> <span class="s">'Author-作者'</span><span class="p">,</span> <span class="n">alldata_thesis_number</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
    <span class="c1"># print(addnamelist)
</span>    <span class="n">edge</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">nameToRowmerge</span><span class="o">=</span><span class="n">nameToRowmerge</span><span class="p">(</span><span class="n">addnamelist</span><span class="p">)</span><span class="c1">#全部姓名对[[],,]
</span>    <span class="c1"># print(nameToRowmerge)#修改标识aa，添加到姓名列表查看
</span>    <span class="k">for</span> <span class="n">name_line</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nameToRowmerge</span><span class="p">)):</span>
        <span class="c1"># print(name_list)
</span>        <span class="c1">#姓名列表转为边
</span>        <span class="c1"># nameToRowmerge[name_line]一行名族列表
</span>        <span class="c1"># paper_umber[name_line]一行项目编码
</span>        <span class="n">edge</span><span class="p">.</span><span class="n">extend</span><span class="p">(</span><span class="n">nemeToEdgeadd</span><span class="p">(</span><span class="n">nameToRowmerge</span><span class="p">[</span><span class="n">name_line</span><span class="p">],</span><span class="n">paper_umber</span><span class="p">[</span><span class="n">name_line</span><span class="p">]))</span>

    <span class="s">'''导出为csv文件'''</span>
    <span class="n">test</span><span class="o">=</span><span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">edge</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">'source'</span><span class="p">,</span><span class="s">'target'</span><span class="p">])</span>
    <span class="n">timestr</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%Y%m%d-%H%M%S"</span><span class="p">)</span><span class="c1">#20220715-085113
</span>    <span class="c1">#查看数据
</span>    <span class="c1"># print(test.values)
</span>    <span class="c1"># 保存到文件
</span>    <span class="n">test</span><span class="p">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s">'edge'</span> <span class="o">+</span> <span class="n">timestr</span><span class="o">+</span><span class="s">'.csv'</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s">'gbk'</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'边已在程序文件夹生成'</span><span class="p">)</span>


    <span class="s">'''创建thsis和alldata 节点id和type'''</span>
    <span class="c1">#创建文件对象
</span>    <span class="n">f</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">'type.csv'</span><span class="p">,</span><span class="s">'w'</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s">'gbk'</span><span class="p">)</span>
    <span class="c1">#基于文件对象构建csv写入对象
</span>    <span class="n">csv_writer</span><span class="o">=</span><span class="n">csv</span><span class="p">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="c1">#指定文件列名
</span>    <span class="n">csv_writer</span><span class="p">.</span><span class="n">writerow</span><span class="p">([</span><span class="s">'Id'</span><span class="p">,</span><span class="s">'Type'</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">thesis_name</span><span class="p">:</span><span class="c1">#为thesis中作者加入
</span>        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">!=</span> <span class="s">'0'</span> <span class="ow">and</span> <span class="n">name</span> <span class="o">!=</span> <span class="s">''</span><span class="p">:</span>
            <span class="n">csv_writer</span><span class="p">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">name</span><span class="p">,</span><span class="s">'GA_thsis'</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">alldata_name</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">!=</span> <span class="s">'0'</span> <span class="ow">and</span> <span class="n">name</span> <span class="o">!=</span> <span class="s">''</span><span class="p">:</span>
            <span class="n">csv_writer</span><span class="p">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">name</span><span class="p">,</span> <span class="s">'GA_project'</span><span class="p">])</span>
    <span class="n">f</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'节点类型已在程序文件夹生成'</span><span class="p">)</span>


</pre></table></code></div></div><h1 id="绘图">绘图</h1><h3 id="1打开gephi文件导入电子表格中文选择编码gbk"><span class="mr-2">1.打开Gephi–&gt;文件–导入电子表格(中文选择编码gbk)</span><a href="#1打开gephi文件导入电子表格中文选择编码gbk" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><img data-src="D:\blog\blog\assets\blog_res022-07-16-networkx绘图.assets.png" style="zoom: 50%;" data-proofer-ignore></p><p>概览里面在首先①位置选择展示节点颜色点击<strong>运行</strong>（我这里是在图形界面选取的紫色）</p><p><img data-src="D:\blog\blog\assets\blog_res022-07-16-networkx绘图.assets.png" style="zoom: 33%;" data-proofer-ignore></p><p>点击②模块化<strong>运行</strong> –确定–&gt;关闭</p><p>第三在③布局出选着你需要的布局，选择后点击运行，效果可以后点击结束,根据自己需求选择。</p><p>（我这里选择的是Fruchterman Reingold的）效果如下：</p><p><img data-src="D:\blog\blog\assets\blog_res022-07-16-networkx绘图.assets.png" style="zoom:50%;" data-proofer-ignore></p><h3 id="2点击-数据资料-点击复制数据到其他列复制id到label"><span class="mr-2">2.点击 ①<strong>数据资料</strong> 点击②<strong>复制数据到其他列</strong>–&gt;<strong>复制id</strong>–&gt;<strong>到label</strong></span><a href="#2点击-数据资料-点击复制数据到其他列复制id到label" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><img data-src="D:\blog\blog\assets\blog_res022-07-16-networkx绘图.assets.png" style="zoom: 150%;" data-proofer-ignore></p><p>在③输入电子表格导入生成的类型数据 <strong>注意选用gbk编码和导入到现有工作区</strong></p><p><img data-src="D:\blog\blog\assets\blog_res022-07-16-networkx绘图.assets0.png" style="zoom: 50%;" data-proofer-ignore></p><h3 id="3回到概览界面外观节点分割方式--选择类型-这里类型就是我们刚刚导入的类型数据点击应用"><span class="mr-2">3.回到概览界面，外观–&gt;节点–&gt;分割方式 选择类型 这里类型就是我们刚刚导入的类型数据，点击应用</span><a href="#3回到概览界面外观节点分割方式--选择类型-这里类型就是我们刚刚导入的类型数据点击应用" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><img data-src="D:\blog\blog\assets\blog_res022-07-16-networkx绘图.assets.png" style="zoom: 67%;" data-proofer-ignore></p><p>点击②可以设置节点大小点击应用 后面依次是标签颜色和标签尺寸</p><p><img data-src="D:\blog\blog\assets\blog_res022-07-16-networkx绘图.assets1.png" style="zoom: 50%;" data-proofer-ignore></p><h4 id="4进入预览界面刷新"><span class="mr-2">4.进入预览界面刷新</span><a href="#4进入预览界面刷新" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><img data-src="D:\blog\blog\assets\blog_res022-07-16-networkx绘图.assets1.png" style="zoom: 50%;" data-proofer-ignore></p><p>如果要显示节点标签在左侧功能取区选择显示节点标签，字体选为中文 ②刷新</p><p><img data-src="D:\blog\blog\assets\blog_res022-07-16-networkx绘图.assets4.png" style="zoom: 50%;" data-proofer-ignore></p></div><div class="post-tail-wrapper text-muted"><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Networkx%E7%BB%98%E5%9B%BE+-+%E7%95%AA%E8%8C%84%E6%99%BA&url=https%3A%2F%2Fliudezhiya.github.io%2F%2Fposts%2Fnetworkx%25E7%25BB%2598%25E5%259B%25BE%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Networkx%E7%BB%98%E5%9B%BE+-+%E7%95%AA%E8%8C%84%E6%99%BA&u=https%3A%2F%2Fliudezhiya.github.io%2F%2Fposts%2Fnetworkx%25E7%25BB%2598%25E5%259B%25BE%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fliudezhiya.github.io%2F%2Fposts%2Fnetworkx%25E7%25BB%2598%25E5%259B%25BE%2F&text=Networkx%E7%BB%98%E5%9B%BE+-+%E7%95%AA%E8%8C%84%E6%99%BA" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/gephi%E4%BD%9C%E8%80%85%E7%BD%91%E7%BB%9C%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/">java基础总结</a><li><a href="/posts/hello/">复杂网络概念</a><li><a href="/posts/java%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93/">java基础总结</a><li><a href="/posts/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a><li><a href="/posts/matlab/">matlab</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%E5%88%86%E7%B1%BB/">分类</a> <a class="post-tag" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">文章内容</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/matlab/"><div class="card-body"> <em class="small" data-ts="1658370840" data-df="YYYY/MM/DD" > 2022/07/21 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>matlab</h3><div class="text-muted small"><p> python绘图 1 ‘r - o’ 和 ‘g - -’。字母 ‘r’ 和 ‘g’ 代表线条的颜色，后面的符号代表线和点标记的类型。 颜色： 蓝色 - ‘b’ 绿色 - ‘g’ 红色 - ‘r’ 青色 - ‘c’ 品红 - ‘m’ 黄色 - ‘y’ 黑色 - ‘k’（’b’代表蓝色，所以这里用黑色的最后一个字母） 白色 - ‘w’ 线： 直线 ‘-’ 虚线 ‘–’...</p></div></div></a></div><div class="card"> <a href="/posts/DataFrame%E6%93%8D%E4%BD%9C/"><div class="card-body"> <em class="small" data-ts="1658288040" data-df="YYYY/MM/DD" > 2022/07/20 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>DataFrame操作</h3><div class="text-muted small"><p> ### [TOC] pandas常用的数据查看方法有 方法 操作 结果 head(n) 查看数据集对象的前n行 Series或DataFrame tail(n) 查看数据集的最后n行 Series或DataFr...</p></div></div></a></div><div class="card"> <a href="/posts/networkxt%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/"><div class="card-body"> <em class="small" data-ts="1657324800" data-df="YYYY/MM/DD" > 2022/07/09 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Networkxt提取数据</h3><div class="text-muted small"><p> 数据处理DataCleaer.py import re import pandas as pd #提取姓名列表传入姓名列表返回合并的姓名列表 def nameToRowmerge(addnamelist): for i in range(len(addnamelist)): name_list = str(addnamelist[i]).split(&#39;;&#39;)...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/networkxt%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE/" class="btn btn-outline-primary" prompt="上一篇"><p>Networkxt提取数据</p></a> <a href="/posts/DataFrame%E6%93%8D%E4%BD%9C/" class="btn btn-outline-primary" prompt="下一篇"><p>DataFrame操作</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%E5%88%86%E7%B1%BB/">分类</a> <a class="post-tag" href="/tags/%E7%94%9F%E6%B4%BB/">生活</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/username">liudezhiya</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0"> 本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
